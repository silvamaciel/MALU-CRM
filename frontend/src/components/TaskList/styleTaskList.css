/* Paleta */
:root{
  --primary:#8a4dff;
  --primary-hover:#7b44e6;
  --background:#f3f4f6;
  --card-bg:#ffffff;
  --text-main:#1f2937;
  --text-light:#6b7280;
  --border-color:#e5e7eb;
  --danger:#ef4444;

  --radius:12px;
  --shadow:0 8px 22px rgba(2,6,23,.08);
  --focus:0 0 0 3px rgba(138,77,255,.35);
}

/* === SHELL ===
   Garante que o componente inteiro nunca ultrapasse 100vh.
   Se tiver header externo, passe viewportOffset no JS para descontar. */
.tasklist-shell{
  display:flex; flex-direction:column;
  max-height:calc(100vh - var(--tasklist-offset, 0px));
  height:calc(100vh - var(--tasklist-offset, 0px));
  /* evita que filhos estourem a altura e quebram o scroll interno */
  min-height:0;
  gap:.75rem;
}

/* Toolbar (fixa no topo do shell) */
.tasks-toolbar{
  display:flex; align-items:center; justify-content:space-between;
}
.button-link.create-link-task{
  color:#fff;
  background-image:linear-gradient(90deg, var(--primary), var(--primary-hover));
  border:0; padding:.55rem .9rem; border-radius:10px; font-weight:700; cursor:pointer;
  box-shadow:0 6px 16px rgba(138,77,255,.25);
}
.button-link.create-link-task:hover{ filter:brightness(1.05); }

.task-scope{
  display:flex; align-items:center; gap:.5rem;
  color:var(--text-main);
}
.task-scope-select{
  padding:.45rem .65rem; border:1px solid var(--border-color); border-radius:10px;
  background:#fff; color:var(--text-main);
}
.task-scope-select:focus{ outline:none; box-shadow:var(--focus); border-color:var(--primary); }

/* === Lista com SCROLL (ocupa o meio) === */
.tasks-scroll{
  flex:1;            /* ocupa o espaço entre toolbar e paginação */
  min-height:0;      /* habilita o overflow funcionar dentro de flex */
  overflow:auto;     /* X e Y quando precisar */
  border-radius:var(--radius);
  border:1px solid var(--border-color);
  background:var(--card-bg);
  box-shadow:var(--shadow);
}

/* Scrollbar (WebKit) */
.tasks-scroll::-webkit-scrollbar{ height:10px; width:10px; }
.tasks-scroll::-webkit-scrollbar-thumb{
  background:linear-gradient(90deg, var(--primary), var(--primary-hover));
  border-radius:10px;
}
.tasks-scroll::-webkit-scrollbar-track{ background:#f1f5f9; border-radius:10px; }

/* Conteúdo interno da lista */
.tasks-list-component{
  display:flex; flex-direction:column; gap:.75rem;
  padding:.75rem;
  min-width:720px; /* força scroll horizontal em telas muito estreitas */
  background:transparent; border:0; box-shadow:none;
}

/* Item */
.task-item-full{
  display:grid;
  grid-template-columns:auto 1fr auto;
  gap:.75rem; align-items:flex-start;
  border:1px solid var(--border-color);
  border-radius:10px; padding:.65rem .75rem; background:#fff;
  min-width:700px;
}
.task-status-toggle{ padding-top:.25rem; }
.task-status-toggle input{ width:18px; height:18px; cursor:pointer; }

.task-content .task-title{ font-weight:700; margin:0 0 .25rem 0; color:var(--text-main); }
.task-content .task-description{ margin:.1rem 0 .35rem 0; color:var(--text-light); }

.task-metadata-full{
  display:flex; flex-wrap:wrap; gap:1rem; color:var(--text-light); font-size:.92rem;
}
.task-metadata-full a{ color:var(--primary); text-decoration:none; }
.task-metadata-full a:hover{ text-decoration:underline; }

/* Ações */
.task-actions{ display:flex; gap:.5rem; }
.button-link{
  background:#fff; color:var(--text-main); border:1px solid var(--border-color);
  padding:.4rem .65rem; border-radius:10px; cursor:pointer; font-weight:600;
}
.button-link:hover{ background:#f9fafb; }
.edit-link-task{ border-color:var(--border-color); }
.delete-link-task{ color:#fff; background:#ef4444; border-color:#ef4444; }
.delete-link-task:hover{ filter:brightness(1.05); }

/* Status (borda lateral sutil) */
.status-concluída { border-left:4px solid #10b981; }
.status-pendente  { border-left:4px solid #f59e0b; }

/* Empty */
.no-tasks-message{ color:var(--text-light); padding:.5rem; }

/* === Paginação (fixa no rodapé do shell) === */
.tasks-pagination{
  display:flex; align-items:center; justify-content:space-between;
  gap:1rem; flex-wrap:wrap;
}

.pagination-left{ display:flex; align-items:center; gap:1rem; color:var(--text-light); }
.pagination-range strong{ color:var(--text-main); }
.page-size{ display:flex; align-items:center; gap:.5rem; }
.page-size select{
  padding:.4rem .6rem; border:1px solid var(--border-color); border-radius:10px;
  background:#fff; color:var(--text-main);
}
.page-size select:focus{ outline:none; border-color:var(--primary); box-shadow:var(--focus); }

.pagination-right{ display:flex; align-items:center; gap:.3rem; }
.page-btn{
  min-width:36px; height:36px; padding:0 .5rem;
  border:1px solid var(--border-color); background:#fff; color:var(--text-main);
  border-radius:10px; cursor:pointer; font-weight:700;
}
.page-btn:hover{ background:#f9fafb; }
.page-btn:disabled{ opacity:.55; cursor:not-allowed; }
.page-btn.is-active{
  color:#fff; border-color:transparent;
  background-image:linear-gradient(90deg, var(--primary), var(--primary-hover));
  box-shadow:0 4px 12px rgba(138,77,255,.25);
}

/* 1) Nunca ultrapassar o viewport: removemos scroll do body/raiz */
html, body { height: 100%; }
body { overflow: hidden; } /* deixa só o scroll interno da lista */

/* 2) Travamos a coluna principal da página de tarefas em 100vh */
.main-content {
  height: 100vh;
  overflow: hidden;
  display: flex;
  min-height: 0;            /* IMPORTANTE: habilita overflow de filhos */
}

/* 3) A página interna vira flex-col e não deixa os filhos estourarem */
.admin-page.tasks-page {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;            /* IMPORTANTE */
}

/* 4) Conteúdo da página (kpis + filtros + lista). Sem overflow aqui */
.page-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 1;
  min-height: 0;            /* IMPORTANTE */
  overflow: hidden;         /* nada de scroll neste nível */
}

/* 5) Container imediato da lista: ocupa o espaço restante e NÃO rola */
.tasks-list-container {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;            /* IMPORTANTE */
  overflow: hidden;         /* nada de scroll aqui também */
}

/* 6) O shell do TaskList que te passei já estava OK: só reforçando */
.tasklist-shell{
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;            /* IMPRESCINDÍVEL para o filho com overflow funcionar */
  gap: .75rem;
}

/* 7) O scroll FICA SOMENTE AQUI */
.tasks-scroll{
  flex: 1;
  min-height: 0;
  overflow: auto;           /* X e Y conforme necessário */
  border-radius: var(--radius);
  border: 1px solid var(--border-color);
  background: var(--card-bg);
  box-shadow: var(--shadow);
}

/* (mantém) largura mínima interna para ativar scroll horizontal se a tela for muito estreita */
.tasks-list-component{ min-width: 720px; }
.task-item-full{ min-width: 700px; }

/* Se existir um header fixo próprio da página (tabs “Pendentes/Concluídas” etc.)
   e você quiser descontar uma altura, use esta var:
   .tasklist-shell { --tasklist-offset: 96px; max-height: calc(100vh - var(--tasklist-offset)); }
   (Mas na maioria dos casos, com o body overflow hidden + flex acima, não precisa) */

   .tasks-scroll::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

.tasks-scroll::-webkit-scrollbar-track {
  background: var(--background);
  border-radius: 8px;
}

.tasks-scroll::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--primary), var(--primary-hover));
  border-radius: 8px;
}

.tasks-scroll::-webkit-scrollbar-thumb:hover {
  background: var(--primary-hover);
}

/* ===== Scrollbar Firefox ===== */
.tasks-scroll {
  scrollbar-width: thin; /* "auto" | "thin" */
  scrollbar-color: #8a4dff var(--background);
}
