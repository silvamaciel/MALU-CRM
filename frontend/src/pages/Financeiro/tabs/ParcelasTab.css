/* ======= PARCELAS (escopo) ======= */
.parcelas-tab * { box-sizing: border-box; }

/* raiz da tab ocupa toda a altura do main */
.parcelas-tab {
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-size: clamp(13px, 0.95rem, 16px);
}

/* ---------- KPIs: sempre lado a lado, sem quebrar linha ---------- */
.parcelas-tab .kpi-container {
  display: flex;
  flex-wrap: nowrap;     /* nunca quebra */
  gap: 12px;
}
.parcelas-tab .kpi-card {
  flex: 1 1 0;           /* divide igualmente e encolhe */
  min-width: 0;          /* permite encolher abaixo do conteúdo */
  background: #fff; border: 1px solid #e6eaf1; border-radius: 12px;
  padding: 16px; min-height: 86px; box-shadow: 0 1px 2px rgba(17,24,39,.05);

  display: flex; flex-direction: column; justify-content: center;
}
.parcelas-tab .kpi-label,
.parcelas-tab .kpi-value { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.parcelas-tab .kpi-label { font-size: 12px; color: #6b7280; margin-bottom: 6px; }
.parcelas-tab .kpi-value { font-size: 1.35rem; font-weight: 800; letter-spacing: .2px; }
.parcelas-tab .kpi-info   { border-left: 4px solid #0ea5b7; }
.parcelas-tab .kpi-info   .kpi-value { color: #0891b2; }
.parcelas-tab .kpi-success{ border-left: 4px solid #16a34a; }
.parcelas-tab .kpi-success .kpi-value { color: #16a34a; }
.parcelas-tab .kpi-danger { border-left: 4px solid #ef4444; }
.parcelas-tab .kpi-danger .kpi-value { color: #ef4444; }

/* ---------- Filtros ---------- */
.parcelas-tab .filters-row {
  display: flex; flex-wrap: wrap; align-items: center; gap: 10px;
}
.parcelas-tab .input-with-icon { position: relative; display: flex; align-items: center; }
.parcelas-tab .input-with-icon > svg { position: absolute; left: 10px; color: #9ca3af; }
.parcelas-tab .input-with-icon > input { padding-left: 34px; }

.parcelas-tab input,
.parcelas-tab select,
.parcelas-tab textarea,
.parcelas-tab .button {
  height: 40px; border-radius: 10px; outline: none;
}
.parcelas-tab input,
.parcelas-tab select {
  background: #fff; border: 1px solid #e6eaf1; padding: 0 12px; color: #111827;
  transition: border-color .15s, box-shadow .15s;
}
.parcelas-tab input:focus,
.parcelas-tab select:focus { border-color: #93c5fd; box-shadow: 0 0 0 3px rgba(59,130,246,.15); }

/* ---------- Botões ---------- */
.parcelas-tab .button {
  display: inline-flex; align-items: center; justify-content: center; gap: 6px;
  border: 1px solid #e6eaf1; background: #fff; color: #1f2937; padding: 0 14px;
  transition: background .15s, box-shadow .15s, transform .02s;
}
.parcelas-tab .button:hover { background: #f3f6fb; }
.parcelas-tab .button.primary { background: #2563eb; border-color: #2563eb; color: #fff; box-shadow: 0 8px 18px rgba(37,99,235,.22); }
.parcelas-tab .button.primary:hover { background: #1d4ed8; }
.parcelas-tab .button.secondary { background: #f4f6fa; color: #374151; }
.parcelas-tab .button.small { height: 34px; padding: 0 12px; }
.parcelas-tab .button.ghost { background: #fff; }

/* ---------- CARD DA LISTA (preenche o restante e rola por dentro) ---------- */
.parcelas-tab .table-card {
  flex: 1 1 auto;
  min-height: 0;                 /* fundamental p/ overflow interno quando travado */
  display: grid;
  grid-template-rows: 1fr auto;  /* body rolável + footer fixo */
  border: 1px solid #e6eaf1;
  border-radius: 12px;
  background: #fff;
  box-shadow: 0 1px 3px rgba(17,24,39,.06);
  overflow: hidden;
}
.parcelas-tab .list-body {
  min-height: 0;
  display: grid;
  grid-template-rows: 1fr;
}

/* ===== TABELA (desktop) ===== */
.parcelas-tab .table-scroll {
  overflow: auto;                 /* scroll interno quando a página está travada */
  scrollbar-gutter: stable;
}
.parcelas-tab .table { width: 100%; border-collapse: collapse; font-size: 0.95rem; }
.parcelas-tab .table-fixed { table-layout: fixed; }
.parcelas-tab thead { background: #f9fbff; }
.parcelas-tab .table-scroll thead th { position: sticky; top: 0; z-index: 1; background: #f9fbff; }
.parcelas-tab th {
  text-align: left; padding: 12px 14px; font-size: 0.9rem; font-weight: 700; color: #1f2937;
  border-bottom: 1px solid #e6eaf1;
}
.parcelas-tab td { padding: 12px 14px; font-size: 14px; color: #374151; border-bottom: 1px solid #eef2f7; vertical-align: middle; }
.parcelas-tab tbody tr:hover { background: #f7fafc; }
.parcelas-tab .ellipsis { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.parcelas-tab th.right, .parcelas-tab td.money { text-align: right; font-variant-numeric: tabular-nums; }

/* ===== CARDS (mobile/tablet) ===== */
.parcelas-tab .list-table { display: block; }
.parcelas-tab .list-cards { display: none; }

@media (max-width: 980px) {
  .parcelas-tab .list-table { display: none; }
  .parcelas-tab .list-cards {
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;

    /* quando a página está destravada no mobile, tiramos overflow interno */
    overflow: auto;
    padding: 10px;
  }
}

.parcelas-tab .parcela-card {
  border: 1px solid #e6eaf1;
  border-radius: 12px;
  background: #fff;
  padding: 12px;
  box-shadow: 0 1px 2px rgba(17,24,39,.05);
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.parcelas-tab .pc-header {
  display: flex; align-items: center; justify-content: space-between; gap: 8px;
}
.parcelas-tab .pc-title { display: flex; flex-direction: column; gap: 2px; }
.parcelas-tab .pc-sacado { font-size: 1rem; line-height: 1.1; }
.parcelas-tab .pc-tipo { color: #6b7280; font-size: .9rem; }

.parcelas-tab .pc-meta {
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 8px 12px;
  align-items: center;
}
.parcelas-tab .pc-field { display: flex; flex-direction: column; gap: 2px; }
.parcelas-tab .pc-label { color: #6b7280; font-size: .78rem; }
.parcelas-tab .pc-value { font-weight: 600; }
.parcelas-tab .pc-money { font-weight: 800; font-variant-numeric: tabular-nums; }
.parcelas-tab .pc-right { text-align: right; }

.parcelas-tab .pc-actions {
  display: flex; align-items: center; justify-content: space-between; gap: 8px;
}
.parcelas-tab .pc-actions .outline {
  height: 34px; padding: 0 12px; border-radius: 10px;
  border: 1px solid #e6eaf1; background: #fff; color: #1f2937; cursor: pointer;
}
.parcelas-tab .pc-actions details > summary::-webkit-details-marker { display: none; }
.parcelas-tab .pc-details-body {
  margin-top: 8px; padding-top: 8px; border-top: 1px dashed #e6eaf1;
  display: grid; gap: 6px;
}

/* estado vazio em cards */
.parcelas-tab .cards-empty {
  border: 1px dashed #e6eaf1;
  border-radius: 12px;
  padding: 14px;
  text-align: center;
  color: #6b7280;
}

/* Footer (paginação fixa no card) */
.parcelas-tab .table-footer {
  display: flex; align-items: center; justify-content: center; gap: 12px;
  padding: 10px; background: #fff; border-top: 1px solid #eef2f7;
}

/* ---------- Tags ---------- */
.parcelas-tab .tag {
  display: inline-flex; align-items: center; padding: 6px 12px; border-radius: 999px;
  font-size: 12px; font-weight: 700;
}
.parcelas-tab .tag-pendente { background:#fff7e6; color:#8a5a00; }
.parcelas-tab .tag-pago     { background:#d9fbe9; color:#065f46; }
.parcelas-tab .tag-atrasado { background:#ffecec; color:#8e1b1b; }

/* ====== Quando a página liberar o SCROLL geral (≤980px ou ≤700px de altura) ======
   - removemos overflow interno da lista para que a rolagem aconteça no documento */
@media (max-width: 980px), (max-height: 700px) {
  .parcelas-tab .table-card { grid-template-rows: auto auto; }
  .parcelas-tab .table-scroll,
  .parcelas-tab .list-cards { overflow: visible; } /* rola a página inteira */
}
